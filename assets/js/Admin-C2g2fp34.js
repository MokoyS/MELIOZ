var q=Object.defineProperty;var s=(r,i)=>q(r,"name",{value:i,configurable:!0});import{j as e,m as n}from"./motion-vendor-CftNABfN.js";import{a}from"./react-vendor-CfQEf0Dx.js";import{a as O,b as R,c as P,I as U,N as C,d as F}from"./ui-vendor-B8pme-e9.js";const L="studio2m",E="growth2025",b="e94fc7d5-3c7d-4738-b5d7-24cf767bea10",g="studio2m-admin-auth",_="studio2m-admin-notes";function G(){const[r,i]=a.useState(!1),[f,x]=a.useState(""),[y,u]=a.useState(""),[N,l]=a.useState(""),[c,d]=a.useState([]),[p,w]=a.useState(""),[h,j]=a.useState(""),[v,m]=a.useState("idle"),S=!!E;a.useEffect(()=>{sessionStorage.getItem(g)==="true"&&i(!0)},[]),a.useEffect(()=>{if(r)try{const t=localStorage.getItem(_);t&&d(JSON.parse(t))}catch(t){console.error("Unable to parse stored notes",t)}},[r]),a.useEffect(()=>{r&&localStorage.setItem(_,JSON.stringify(c))},[r,c]);const A=a.useMemo(()=>[...c].sort((t,o)=>o.createdAt-t.createdAt),[c]),I=s(t=>{if(t.preventDefault(),!S){l("Configuration manquante. Définissez VITE_ADMIN_USER et VITE_ADMIN_PASS dans votre fichier .env.local.");return}f.trim()===L&&y===E?(i(!0),sessionStorage.setItem(g,"true"),l(""),x(""),u("")):l("Identifiants incorrects. Merci de vérifier vos accès.")},"handleLogin"),k=s(()=>{if(!p.trim()||!h.trim())return;const t={id:crypto.randomUUID(),title:p.trim(),content:h.trim(),createdAt:Date.now()};d(o=>[...o,t]),w(""),j("")},"handleAddNote"),z=s(t=>{d(o=>o.filter(T=>T.id!==t))},"handleDelete"),M=s(()=>{i(!1),d([]),sessionStorage.removeItem(g),l(""),x(""),u("")},"handleLogout"),D=s(async()=>{try{await navigator.clipboard.writeText(b),m("copied"),setTimeout(()=>m("idle"),2e3)}catch(t){console.error("Clipboard error",t),m("error"),setTimeout(()=>m("idle"),2e3)}},"handleCopyKey");return r?e.jsxs(n.section,{className:"relative min-h-screen overflow-hidden bg-[#0a0a0a] py-24 sm:py-32",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-cyan-500/10"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 relative z-10",children:[e.jsxs("div",{className:"mb-16 flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"inline-flex w-fit items-center gap-2 rounded-full border border-blue-500/20 bg-blue-500/10 px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-blue-200",children:"Admin Melioz"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl sm:text-5xl font-bold text-white",children:["Espace interne",e.jsx("span",{className:"block mt-2 bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:"Notes & ressources confidentielles"})]}),e.jsx("p",{className:"mt-4 text-gray-400 max-w-2xl",children:"Centralisez les informations critiques du site, les accès et les points d'attention pour l'équipe. Ces notes sont stockées uniquement sur cet appareil (localStorage) et ne quittent pas votre navigateur."})]})]}),e.jsx("div",{className:"flex items-start",children:e.jsx("button",{type:"button",onClick:M,className:"rounded-lg border border-white/15 bg-white/5 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-white/80 transition hover:bg-white/10 hover:text-white",children:"Déconnexion"})})]}),e.jsxs("div",{className:"grid gap-8 lg:grid-cols-[320px,1fr]",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-white",children:[e.jsx(O,{className:"h-5 w-5 text-blue-400"}),"Accès critiques"]}),e.jsx("p",{className:"mt-3 text-sm text-gray-400",children:"Clé Web3Forms utilisée par le formulaire de contact."}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-lg border border-blue-400/20 bg-blue-500/10 px-3 py-2 text-sm text-blue-100",children:[e.jsx("span",{className:"truncate text-xs sm:text-sm",children:b}),e.jsxs("button",{type:"button",onClick:D,className:"ml-3 inline-flex items-center gap-1 rounded-md border border-white/10 px-3 py-1 text-xs font-medium text-white transition hover:bg-white/5 disabled:cursor-not-allowed disabled:opacity-60",disabled:!b,children:[e.jsx(R,{className:"h-3.5 w-3.5"}),v==="copied"?"Copié":v==="error"?"Clé manquante":"Copier"]})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-xs text-gray-400",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-cyan-300"}),"Endpoint : https://api.web3forms.com/submit"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-amber-300"}),"Modifier la clé ? Mettez à jour VITE_WEB3FORMS_KEY dans votre fichier .env.local (réutilisée dans src/components/CTA.tsx)."]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-white",children:[e.jsx(C,{className:"h-5 w-5 text-blue-400"}),"Nouvelle note"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Gardez une trace des accès, to-do internes ou décisions clients. Les notes restent privées sur votre machine."}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("input",{value:p,onChange:s(t=>w(t.target.value),"onChange"),placeholder:"Titre de la note (ex: Accès staging)",className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-3 text-sm text-white placeholder-gray-500 focus:border-blue-500/40 focus:outline-none"}),e.jsx("textarea",{value:h,onChange:s(t=>j(t.target.value),"onChange"),placeholder:"Détaillez ici les informations utiles pour l'équipe. Pensez aux comptes, deadlines, retours clients, etc.",rows:4,className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-3 text-sm text-white placeholder-gray-500 focus:border-blue-500/40 focus:outline-none"}),e.jsx("button",{type:"button",onClick:k,className:"w-full rounded-lg bg-gradient-to-r from-blue-500 to-cyan-400 py-3 text-sm font-semibold text-white transition hover:shadow-[0_18px_40px_-24px_rgba(56,189,248,0.55)]",children:"Ajouter la note"})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Notes internes"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Stockage local"})]}),A.length===0?e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-3 rounded-xl border border-dashed border-white/10 bg-black/20 px-6 py-12 text-center",children:[e.jsx(C,{className:"h-8 w-8 text-gray-600"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Pas encore de note enregistrée. Ajoutez vos informations sensibles via le formulaire à gauche."})]}):e.jsx("ul",{className:"mt-6 space-y-4",children:A.map(t=>e.jsxs("li",{className:"group rounded-xl border border-white/10 bg-black/20 px-5 py-4 transition hover:border-blue-500/30 hover:bg-black/30",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-white",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(t.createdAt).toLocaleString("fr-FR",{dateStyle:"medium",timeStyle:"short"})})]}),e.jsx("button",{type:"button",onClick:s(()=>z(t.id),"onClick"),className:"rounded-lg border border-white/10 p-2 text-gray-400 transition hover:border-red-400/30 hover:bg-red-500/10 hover:text-red-300","aria-label":"Supprimer la note",children:e.jsx(F,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"mt-3 whitespace-pre-wrap text-sm leading-relaxed text-gray-300",children:t.content})]},t.id))})]})})]})]})]}):e.jsxs(n.section,{className:"relative min-h-screen overflow-hidden bg-[#0a0a0a] py-24 sm:py-32",initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-cyan-500/10"}),e.jsx("div",{className:"absolute -top-24 right-1/4 h-80 w-80 rounded-full bg-blue-500/15 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-24 left-1/4 h-80 w-80 rounded-full bg-cyan-500/15 blur-3xl"}),e.jsx("div",{className:"relative z-10 mx-auto max-w-md px-4",children:e.jsxs(n.div,{className:"rounded-3xl border border-white/10 bg-white/5 p-8 sm:p-10 backdrop-blur",initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut",delay:.2},children:[e.jsx("div",{className:"inline-flex items-center gap-2 rounded-full border border-blue-500/20 bg-blue-500/10 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-blue-200",children:"Accès restreint"}),e.jsx("h1",{className:"mt-6 text-3xl font-semibold text-white",children:"Console interne Melioz"}),e.jsx("p",{className:"mt-3 text-sm text-gray-400",children:"Déverrouillez l'espace d'administration pour partager les informations sensibles avec l'équipe."}),!S&&e.jsx(n.p,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},className:"mt-5 rounded-lg border border-amber-500/20 bg-amber-500/10 px-3 py-2 text-xs text-amber-200",children:"Identifiants non configurés. Ajoutez VITE_ADMIN_USER et VITE_ADMIN_PASS dans le fichier .env.local puis relancez le serveur."}),N&&e.jsx(n.p,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},className:"mt-5 rounded-lg border border-red-500/20 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:N}),e.jsxs("form",{onSubmit:I,className:"mt-8 space-y-4",autoComplete:"off",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"admin-username",className:"text-xs font-medium uppercase tracking-[0.2em] text-gray-400",children:"Identifiant"}),e.jsx("input",{id:"admin-username",name:"username",value:f,onChange:s(t=>x(t.target.value),"onChange"),placeholder:"Pseudo administrateur",autoComplete:"username",className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-3 text-sm text-white placeholder-gray-500 focus:border-blue-500/40 focus:outline-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"admin-password",className:"text-xs font-medium uppercase tracking-[0.2em] text-gray-400",children:"Mot de passe"}),e.jsx("input",{id:"admin-password",name:"password",type:"password",value:y,onChange:s(t=>u(t.target.value),"onChange"),placeholder:"Mot de passe sécurisé",autoComplete:"current-password",className:"w-full rounded-lg border border-white/10 bg-white/5 px-4 py-3 text-sm text-white placeholder-gray-500 focus:border-blue-500/40 focus:outline-none"})]}),e.jsx("button",{type:"submit",className:"w-full rounded-lg bg-gradient-to-r from-blue-500 to-cyan-400 py-3 text-sm font-semibold text-white transition hover:shadow-[0_18px_40px_-24px_rgba(56,189,248,0.55)]",children:"Se connecter"})]}),e.jsx("p",{className:"mt-6 text-xs text-gray-500",children:"Astuce : les identifiants sont partagés en interne. Changez-les régulièrement et évitez de conserver cet onglet ouvert sur un poste public."})]})})]})}s(G,"Admin");export{G as default};
